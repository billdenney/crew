<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Centralized Workers • crew</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Centralized Workers">
<meta property="og:description" content="A task queue is a central hub for orchestrating
  computationally demanding workloads dynamically and asynchronously.
  The crew package supports a variety of task queues with
  a common interface and different types of workers for different
  platforms, similar to the way the
  future package (2021, &lt;doi:10.32614/RJ-2021-048&gt;)
  provides a unified R interface for single jobs and
  individual map-reduce calls. The crew package borrows
  the task queue design from the callr package vignettes and
  &lt;https://www.tidyverse.org/blog/2019/09/callr-task-q/&gt;,
  enhances the core feature set (for example, crash detection),
  and establishes an extensible R6 class system to add more worker types
  as development continues (e.g. jobs on Amazon and Google cloud
  computing platforms). Multi-queue structures, such as the
  already-supported future-based task queue, increase
  efficiency in heavily parallel cluster workloads
  with an inner local asynchronous task queue to manage
  task submission, monitoring, and collection.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">crew</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Functions</a>
</li>
<li>
  <a href="articles/usage.html">Usage</a>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ropensci/targets" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="crew">crew<a class="anchor" aria-label="anchor" href="#crew"></a>
</h1></div>
<!--[![CRAN](https://www.r-pkg.org/badges/version/crew)](https://CRAN.R-project.org/package=crew)-->
<p>A task queue is a central hub for orchestrating computationally demanding workloads dynamically and asynchronously. The <code>crew</code> package supports a variety of task queues with a common interface and different types of workers for different platforms, similar to the way the <a href="https://future.futureverse.org/" class="external-link"><code>future</code></a> package provides a unified R interface for single jobs and individual map-reduce calls. The <code>crew</code> package borrows the task queue design from the <a href="https://github.com/r-lib/callr/blob/811a02f604de2cf03264f6b35ce9ec8a412f2581/vignettes/Task-queue-with-callr.Rmd" class="external-link"><code>callr</code> package vignettes</a> and <a href="https://www.tidyverse.org/blog/2019/09/callr-task-q/" class="external-link uri">https://www.tidyverse.org/blog/2019/09/callr-task-q/</a>, enhances the core feature set (for example, crash detection), and establishes an extensible <a href="https://r6.r-lib.org/" class="external-link"><code>R6</code></a> class system to add more worker types as development continues (e.g. jobs on Amazon and Google cloud computing platforms). Multi-queue structures, such as the already-supported ’<a href="https://future.futureverse.org/" class="external-link"><code>future</code></a>-based task queue, increase efficiency in heavily parallel <a href="https://future.batchtools.futureverse.org/" class="external-link">cluster</a> workloads with an inner local asynchronous task queue to manage task submission, monitoring, and collection.</p>
<div class="section level2">
<h2 id="similar-work">Similar work<a class="anchor" aria-label="anchor" href="#similar-work"></a>
</h2>
<ul>
<li>
<a href="https://docs.ropensci.org/targets/" class="external-link"><code>targets</code></a>: a Make-like pipeline tool for R. Event loops in <a href="https://docs.ropensci.org/targets/" class="external-link"><code>targets</code></a> invoke packages <a href="https://mschubert.github.io/clustermq/" class="external-link"><code>clustermq</code></a> and <a href="https://future.futureverse.org/" class="external-link"><code>future</code></a> to run tasks concurrently and asynchronously. <a href="https://docs.ropensci.org/targets/" class="external-link"><code>targets</code></a> would be able to support different scheduling techniques and run on more platforms if it incorporated a formal task queue behind the scenes. That task queue is probably going to be <code>crew</code> or <a href="https://mrc-ide.github.io/rrq/" class="external-link"><code>rrq</code></a>.</li>
<li>
<a href="https://github.com/r-lib/callr" class="external-link"><code>callr</code></a>: the previous <a href="https://github.com/r-lib/callr/blob/811a02f604de2cf03264f6b35ce9ec8a412f2581/vignettes/Task-queue-with-callr.Rmd" class="external-link">task queue vignette</a>, as well as the blog post at <a href="https://www.tidyverse.org/blog/2019/09/callr-task-q/" class="external-link uri">https://www.tidyverse.org/blog/2019/09/callr-task-q/</a>, show how to create an efficient multi-process task queue using <a href="https://callr.r-lib.org/reference/r_session.html" class="external-link"><code>callr::r_session</code></a>. The goal of <code>crew</code> is to eventually extend this idea to different worker types, such as <a href="https://aws.amazon.com/batch/" class="external-link">Amazon Web Services (AWS) Batch</a> jobs.</li>
<li>
<a href="https://mrc-ide.github.io/rrq/" class="external-link"><code>rrq</code></a>: an R-focused task queue built on Redis, successor of <a href="http://traitecoevo.github.io/rrqueue/" class="external-link"><code>rrqueue</code></a>. It is possible that <a href="https://mrc-ide.github.io/rrq/" class="external-link"><code>rrq</code></a> makes <code>crew</code> irrelevant.</li>
<li>
<a href="http://traitecoevo.github.io/rrqueue/" class="external-link"><code>rrqueue</code></a>: an R-focused task queue built on Redis, no longer maintained.</li>
<li>
<a href="https://future.futureverse.org/" class="external-link"><code>future</code></a>: a unified interface for asynchronous evaluation of single tasks and map-reduce calls on a wide variety of backend technologies. One of the backends of <code>crew</code>.</li>
<li>
<a href="https://mschubert.github.io/clustermq/" class="external-link"><code>clustermq</code></a>: an R layer on top of <a href="https://zeromq.org/" class="external-link">ZeroMQ</a> for submitting tasks as array jobs on traditional clusters.</li>
<li>
<a href="https://github.com/shikokuchuo/mirai" class="external-link"><code>mirai</code></a>: an R framework for asynchronous tasks built on <a href="https://nng.nanomsg.org" class="external-link">NNG</a>.</li>
<li>
<a href="https://rstudio.github.io/promises/" class="external-link"><code>promises</code></a>: minimally-invasive asynchronous programming for a small number of tasks within Shiny apps.</li>
<li>
<a href="https://r-lib.github.io/later/" class="external-link"><code>later</code></a>: delayed evaluation of synchronous tasks.</li>
<li>
<a href="https://CRAN.R-project.org/view=HighPerformanceComputing" class="external-link">High-performance computing CRAN task view</a>.</li>
</ul>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"wlandau/crew"</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="documentation">Documentation<a class="anchor" aria-label="anchor" href="#documentation"></a>
</h2>
<p>Please see <a href="https://wlandau.github.io/crew/articles/usage.html" class="external-link uri">https://wlandau.github.io/crew/articles/usage.html</a> for a tutorial.</p>
</div>
<div class="section level2">
<h2 id="future-development">Future development<a class="anchor" aria-label="anchor" href="#future-development"></a>
</h2>
<p><code>crew</code>, <a href="https://mrc-ide.github.io/rrq/" class="external-link"><code>rrq</code></a>, or something like it will serve as a backend to get <a href="https://docs.ropensci.org/targets/" class="external-link"><code>targets</code></a> running distributed workers on the cloud (AWS Batch, AWS Fargate, Google Cloud Run, etc.). If <code>crew</code> fills this role, new <a href="https://wlandau.github.io/crew/reference/index.html#queues" class="external-link">task queues</a> and <a href="https://wlandau.github.io/crew/reference/index.html#stores" class="external-link">data stores</a> will be developed for cloud platforms.</p>
</div>
<div class="section level2">
<h2 id="thanks">Thanks<a class="anchor" aria-label="anchor" href="#thanks"></a>
</h2>
<p>The <code>crew</code> package incorporates insightful ideas from the following people.</p>
<ul>
<li>
<a href="https://github.com/gaborcsardi/" class="external-link">Gábor Csárdi</a>. Gábor created the <a href="https://github.com/r-lib/callr" class="external-link"><code>callr</code></a> R package and wrote instructional code for creating task queues using <a href="https://callr.r-lib.org/reference/r_session.html" class="external-link"><code>callr::r_session</code></a> (links below). <code>crew</code> borrows and modifies the <a href="https://github.com/r-lib/callr/blob/811a02f604de2cf03264f6b35ce9ec8a412f2581/vignettes/taskq.R" class="external-link">vignette code</a> under the MIT license. See also the <code>crew</code> package <code>NOTICE</code> file.<ul>
<li>Blog post: <a href="https://www.tidyverse.org/blog/2019/09/callr-task-q/" class="external-link uri">https://www.tidyverse.org/blog/2019/09/callr-task-q/</a>
</li>
<li>
<code>callr</code> vignette code: <a href="https://github.com/r-lib/callr/blob/811a02f604de2cf03264f6b35ce9ec8a412f2581/vignettes/taskq.R" class="external-link uri">https://github.com/r-lib/callr/blob/811a02f604de2cf03264f6b35ce9ec8a412f2581/vignettes/taskq.R</a>
</li>
</ul>
</li>
<li>
<a href="https://github.com/krlmlr/" class="external-link">Kirill Müller</a>. The <a href="https://github.com/wlandau/workers" class="external-link"><code>workers</code></a> prototype was entirely his vision, and <code>crew</code> would not exist without it. <code>crew</code> reflects this and many other insights from Kirill about orchestration models for R processes.</li>
<li>
<a href="https://github.com/HenrikBengtsson/" class="external-link">Henrik Bengtsson</a>. Henrik’s <a href="https://github.com/HenrikBengtsson/future/" class="external-link"><code>future</code></a> package ecosystem demonstrates the incredible power of a consistent R interface on top of a varying collection of high-performance computing technologies.</li>
<li>
<a href="https://github.com/mschubert/" class="external-link">Michael Schubert</a>. Michael’s <a href="https://mschubert.github.io/clustermq/" class="external-link"><code>clustermq</code></a> package supports efficient high-performance computing on traditional clusters, and it demonstrates the value of a central <code>R6</code> object to manage an entire collection of persistent workers.</li>
<li>
<a href="https://github.com/davidkretch" class="external-link">David Kretch</a>. The <a href="https://github.com/paws-r/paws" class="external-link"><code>paws</code></a> R package is a powerful interface to Amazon Web Services, and the documentation clearly communicates the capabilities and limitations of AWS to R users.</li>
<li>
<a href="https://github.com/adambanker" class="external-link">Adam Banker</a>, co-authored <a href="https://github.com/paws-r/paws" class="external-link"><code>paws</code></a> with <a href="https://github.com/davidkretch" class="external-link">David Kretch</a>.</li>
<li>
<a href="https://github.com/mdneuzerling" class="external-link">David Neuzerling</a>. David’s <a href="https://github.com/mdneuzerling/lambdr/" class="external-link"><code>lambdr</code></a> package establishes a helpful pattern to submit and collect AWS Lambda jobs from R.</li>
<li>
<a href="https://github.com/MarkEdmondson1234/" class="external-link">Mark Edmondson</a>. Mark maintains several R packages to interface with Google Cloud Platform such as <a href="https://github.com/cloudyr/googleCloudStorageR" class="external-link"><code>googleCloudStorageR</code></a> and <a href="https://github.com/MarkEdmondson1234/googleCloudRunner" class="external-link"><code>googleCloudRunner</code></a>, and he <a href="https://github.com/ropensci/targets/issues/720" class="external-link">started the conversation</a> around helping <a href="https://github.com/ropensci/targets" class="external-link"><code>targets</code></a> submit jobs to Google Cloud Run.</li>
</ul>
</div>
<div class="section level2">
<h2 id="code-of-conduct">Code of Conduct<a class="anchor" aria-label="anchor" href="#code-of-conduct"></a>
</h2>
<p>Please note that the <code>crew</code> project is released with a <a href="https://github.com/wlandau/crew/blob/main/CODE_OF_CONDUCT.md" class="external-link">Contributor Code of Conduct</a>. By contributing to this project, you agree to abide by its terms.</p>
</div>
<div class="section level2">
<h2 id="citation">Citation<a class="anchor" aria-label="anchor" href="#citation"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw">citation</span>(<span class="st">"crew"</span>)</span>
<span id="cb2-2"><a href="#cb2-2"></a></span>
<span id="cb2-3"><a href="#cb2-3"></a>To cite package <span class="st">'crew'</span> <span class="cf">in</span> publications use<span class="op">:</span></span>
<span id="cb2-4"><a href="#cb2-4"></a></span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="st">  </span>Landau <span class="kw">WM</span> (????). _crew<span class="op">:</span><span class="st"> </span>Centralized Reusable Workers_.</span>
<span id="cb2-6"><a href="#cb2-6"></a>  https<span class="op">:</span><span class="er">//</span>wlandau.github.io<span class="op">/</span>crew<span class="op">/</span>, https<span class="op">:</span><span class="er">//</span>github.com<span class="op">/</span>wlandau<span class="op">/</span>crew.</span>
<span id="cb2-7"><a href="#cb2-7"></a></span>
<span id="cb2-8"><a href="#cb2-8"></a>A BibTeX entry <span class="cf">for</span> LaTeX users is</span>
<span id="cb2-9"><a href="#cb2-9"></a></span>
<span id="cb2-10"><a href="#cb2-10"></a>  <span class="op">@</span>Manual{,</span>
<span id="cb2-11"><a href="#cb2-11"></a>    title =<span class="st"> </span>{crew<span class="op">:</span><span class="st"> </span>Centralized Reusable Workers},</span>
<span id="cb2-12"><a href="#cb2-12"></a>    author =<span class="st"> </span>{William Michael Landau},</span>
<span id="cb2-13"><a href="#cb2-13"></a>    note =<span class="st"> </span>{https<span class="op">:</span><span class="er">//</span>wlandau.github.io<span class="op">/</span>crew<span class="op">/</span>, https<span class="op">:</span><span class="er">//</span>github.com<span class="op">/</span>wlandau<span class="op">/</span>crew},</span>
<span id="cb2-14"><a href="#cb2-14"></a>  }</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/wlandau/crew/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/wlandau/crew/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing crew</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>William Michael Landau <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-1878-3253" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.repostatus.org/#wip" class="external-link"><img src="https://www.repostatus.org/badges/latest/wip.svg" alt="status"></a></li>
<li><a href="https://github.com/wlandau/crew/actions?query=workflow%3Acheck" class="external-link"><img src="https://github.com/wlandau/crew/workflows/check/badge.svg" alt="check"></a></li>
<li><a href="https://app.codecov.io/gh/wlandau/crew" class="external-link"><img src="https://codecov.io/gh/wlandau/crew/branch/main/graph/badge.svg?token=3T5DlLwUVl" alt="codecov"></a></li>
<li><a href="https://github.com/wlandau/crew/actions?query=workflow%3Alint" class="external-link"><img src="https://github.com/wlandau/crew/workflows/lint/badge.svg" alt="lint"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by William Michael Landau.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
